#!/usr/bin/env splrun

load "curl";

function check_thing(id)
{
	var html = curl("http://www.thingiverse.com/thing:$id").body =~ s/\n/ /Rg;
	if (html =~ /href="\/tag:openscad"/)
		return 0;
	if (html =~ /class="file_info">\s*[^<>]+\.scad\s/)
		return 1;
	return 0;
}

for (var i=12000; i < 12100; i++) {
	debug i;
	if (check_thing(i))
		write("http://www.thingiverse.com/thing:$i\n");
}

