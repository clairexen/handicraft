<script src="http://visual6502.org/JSSim/segdefs.js"></script>
<script src="http://visual6502.org/JSSim/transdefs.js"></script>
<script src="http://visual6502.org/JSSim/nodenames.js"></script>
<script>

document.write("<pre>\n");
document.write("# generated by model6502.html from http://visual6502.org/JSSim/\n");

function fmt(text)
{
	var args = arguments;
	function replace_arg(_dummy, i) { return i > 0 ? args[i] : "{"; };
	return text.replace(/\{([0-9]+)\}/g, replace_arg);
}

var allNets = new Array();
var uniqueTransMap = new Object();

for (i in segdefs) {
	netid = segdefs[i][0];
	pullup = segdefs[i][1] == '+';
	if (allNets[netid] == undefined) {
		allNets[netid] = {
			init: "float", supply: 0, neigh: [ ], ccPtr: [ ], ccIdx: [ ], names: [ ]
		};
	}
	if (pullup)
		allNets[netid].init = "pullup";
}
for (i in nodenames) {
	if (nodenames[i] >= 0) {
		if (/^[_a-z][^ \t\r\n:,;]+$/.test(i))
			allNets[nodenames[i]].names.push(i);
		else
			allNets[nodenames[i]].names.push('"' + i + '"');
	}
	if (i == "vcc") {
		netid = nodenames[i];
		allNets[netid].init = "pullup";
		allNets[netid].supply = 1;
	}
	if (i == "vss") {
		netid = nodenames[i];
		allNets[netid].init = "pulldown";
		allNets[netid].supply = 1;
	}
}

for (i in allNets) {
	var n = allNets[i];
	document.write(fmt("N n{1}", i));
	for (j in n.names)
		document.write(fmt(" {1}", n.names[j]));
	document.write(fmt(": {1}", n.init));
	if (n.supply)
		document.write(" supply");
	document.write("\n");
}


for (i in transdefs) {
	var gate = transdefs[i][1];
	var cc1 = transdefs[i][2];
	var cc2 = transdefs[i][3];
	document.write(fmt("T t{1}: nmos n{2} n{3} n{4}\n", i, gate, cc1, cc2));
}

</script>
